[{"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\index.js":"1","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\App.js":"2","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\store.js":"3","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\LoginScreen.js":"4","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\DailyScreen.js":"5","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\HomeScreen.js":"6","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\DocViewerScreen.js":"7","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\RegisterScreen.js":"8","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\AddScreen.js":"9","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\reducers\\userReducers.js":"10","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\Message.jsx":"11","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\formContainer.jsx":"12","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\actions\\userActions.js":"13","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\constants\\userConstants.js":"14","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\Header.jsx":"15","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\reducers\\docReducers.js":"16","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\constants\\docConstants.js":"17","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\actions\\docActions.js":"18","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\Loader.jsx":"19","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\Templog.js":"20","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\Log.jsx":"21","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\logger.jsx":"22"},{"size":407,"mtime":1660476829594,"results":"23","hashOfConfig":"24"},{"size":1245,"mtime":1660983145998,"results":"25","hashOfConfig":"24"},{"size":821,"mtime":1660723921289,"results":"26","hashOfConfig":"24"},{"size":2615,"mtime":1660990826834,"results":"27","hashOfConfig":"24"},{"size":16623,"mtime":1661077043254,"results":"28","hashOfConfig":"24"},{"size":2351,"mtime":1659768681134,"results":"29","hashOfConfig":"24"},{"size":294,"mtime":1660634989767,"results":"30","hashOfConfig":"24"},{"size":2979,"mtime":1660635763666,"results":"31","hashOfConfig":"24"},{"size":4287,"mtime":1660989371293,"results":"32","hashOfConfig":"24"},{"size":1022,"mtime":1659876072091,"results":"33","hashOfConfig":"24"},{"size":359,"mtime":1660478205278,"results":"34","hashOfConfig":"24"},{"size":352,"mtime":1659768681128,"results":"35","hashOfConfig":"24"},{"size":1692,"mtime":1659949890696,"results":"36","hashOfConfig":"24"},{"size":386,"mtime":1659857729148,"results":"37","hashOfConfig":"24"},{"size":4762,"mtime":1661079660158,"results":"38","hashOfConfig":"24"},{"size":478,"mtime":1660723877114,"results":"39","hashOfConfig":"24"},{"size":150,"mtime":1660718429277,"results":"40","hashOfConfig":"24"},{"size":615,"mtime":1660723651837,"results":"41","hashOfConfig":"24"},{"size":395,"mtime":1660718327539,"results":"42","hashOfConfig":"24"},{"size":138,"mtime":1660983121634,"results":"43","hashOfConfig":"24"},{"size":1295,"mtime":1661072235081,"results":"44","hashOfConfig":"24"},{"size":200,"mtime":1660987503140,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"1lg3cxd",{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"48"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"48"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\index.js",[],["94","95"],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\App.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\store.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\LoginScreen.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\DailyScreen.js",["96"],"import React, { useEffect, useRef, useState } from 'react'\r\nimport { Button, Table } from 'reactstrap'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { Modal, Form, Card, Container } from 'react-bootstrap'\r\nimport { useSelector } from 'react-redux'\r\nimport notificationSound from '../notification.wav'\r\nimport { postLog } from '../logger'\r\n\r\nconst DailyScreen = () => {\r\n  //vars\r\n  let cnt = 0\r\n  //states\r\n  const audioPlayer = useRef(null)\r\n  const [docs, setDocs] = useState([])\r\n  const [show, setShow] = useState(false)\r\n  const [checkedState, setCheckedState] = useState(new Array(8).fill(false))\r\n  const [selectedFile, setSelectedFile] = useState()\r\n  //other hooks\r\n  let navigate = useNavigate()\r\n  const userLogin = useSelector((state) => state.userLogin)\r\n  const { userInfo } = userLogin\r\n  //methods\r\n  const handleClose = () => setShow(false)\r\n  const handleShow = () => setShow(true)\r\n  const setRead = async (fileID, depID) => {\r\n    audioPlayer.current.play()\r\n    await axios.post(`/api/v1/files/notify/${depID}`)\r\n    Notification.requestPermission()\r\n    new Notification('تم إرسال مكاتبة جديدة')\r\n  }\r\n\r\n  const setReadColor = async (fileID, depID) => {\r\n    await axios.post(`/api/v1/files/read/${fileID}/${depID}`)\r\n  }\r\n\r\n  const fetchDocs = () => {\r\n    axios\r\n      .get(`/api/v1/files/daily/show/${userInfo.dep_id}`)\r\n      .then(async (res) => {\r\n        setDocs(res.data)\r\n        for (let i = 0; i < res.data.length; i++) {\r\n          if (res.data[i].notify === 1) {\r\n            await setRead(res.data[i].file_no, userInfo.dep_id)\r\n          }\r\n        }\r\n      })\r\n  }\r\n\r\n  const removeDoc = async (fileId, depId) => {\r\n    console.log(fileId)\r\n    await axios.delete(`/api/v1/files/remove/${fileId}/${depId}`)\r\n  }\r\n\r\n  let getData = async (id) => {\r\n    await axios.get(`/api/v1/files/open/${id}`)\r\n  }\r\n\r\n  const handleOnChange = (position) => {\r\n    const updatedCheckedState = checkedState.map((perm, index) =>\r\n      index === position ? !perm : perm\r\n    )\r\n\r\n    setCheckedState(updatedCheckedState)\r\n  }\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault()\r\n    axios\r\n      .post('/api/v1/files/send', {\r\n        checkedState,\r\n        selectedFile: selectedFile.file_no,\r\n      })\r\n      .then((res) => {})\r\n    setSelectedFile()\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchDocs()\r\n\r\n    const interval = setInterval(() => {\r\n      fetchDocs()\r\n      // docs.map((e) => {\r\n      //   console.log(e)\r\n      // })\r\n    }, 1000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h1 className='text-center my-5 title'>المكاتبات اليومية</h1>\r\n\r\n      <audio ref={audioPlayer} src={notificationSound} />\r\n      <div className='container text-center'>\r\n        <Card className='p-3'>\r\n          <Container>\r\n            {docs.length ? (\r\n              <Table className='table table-hover '>\r\n                <thead>\r\n                  <tr>\r\n                    <th scope='col'></th>\r\n                    <th scope='col'>الملخص</th>\r\n                    <th scope='col'>اسم المكاتبة</th>\r\n                    <th scope='col'>م</th>\r\n                  </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                  {docs.map((el) => (\r\n                    <tr\r\n                      key={cnt}\r\n                      className={`docTable ${\r\n                        el.notify_color ? 'unread' : <></>\r\n                      }`}\r\n                    >\r\n                      <td style={{ width: '30%' }}>\r\n                        {userInfo.department === 'المدير العام' ||\r\n                        userInfo.department === 'نائب المدير العام' ||\r\n                        userInfo.department === 'الأرشيف العام' ||\r\n                        userInfo.department === 'سكرتير المدير العام' ? (\r\n                          <Button\r\n                            color='success'\r\n                            onClick={() => {\r\n                              handleShow()\r\n                              setSelectedFile(el)\r\n                            }}\r\n                          >\r\n                            ارسال\r\n                          </Button>\r\n                        ) : (\r\n                          <></>\r\n                        )}\r\n                        <Modal show={show} onHide={handleClose}>\r\n                          <Modal.Header closeButton>\r\n                            <Modal.Title style={{ alignItems: 'center' }}>\r\n                              الأقسام المرسل إليها\r\n                            </Modal.Title>\r\n                          </Modal.Header>\r\n                          <Form onSubmit={submitHandler}>\r\n                            <div>\r\n                              <Modal.Body>\r\n                                <Form.Group>\r\n                                  <div>\r\n                                    <Form.Check\r\n                                      inline\r\n                                      type='checkbox'\r\n                                      reverse\r\n                                      label='الإدارة القانونية'\r\n                                      style={{ marginRight: '28px' }}\r\n                                      checked={checkedState[1]}\r\n                                      onChange={() => handleOnChange(1)}\r\n                                      disabled={\r\n                                        userInfo.department ===\r\n                                          'المدير العام' ||\r\n                                        userInfo.department ===\r\n                                          'نائب المدير العام'\r\n                                          ? true\r\n                                          : false\r\n                                      }\r\n                                    />\r\n                                    <Form.Check\r\n                                      inline\r\n                                      reverse\r\n                                      type='checkbox'\r\n                                      label='التخطيط و المتابعة'\r\n                                      checked={checkedState[2]}\r\n                                      onChange={() => handleOnChange(2)}\r\n                                      disabled={\r\n                                        userInfo.department ===\r\n                                          'المدير العام' ||\r\n                                        userInfo.department ===\r\n                                          'نائب المدير العام'\r\n                                          ? true\r\n                                          : false\r\n                                      }\r\n                                    />\r\n                                  </div>\r\n                                  <div>\r\n                                    <Form.Check\r\n                                      inline\r\n                                      reverse\r\n                                      type='checkbox'\r\n                                      label='قسم العقود'\r\n                                      style={{ marginRight: '46px' }}\r\n                                      checked={checkedState[3]}\r\n                                      onChange={() => handleOnChange(3)}\r\n                                      disabled={\r\n                                        userInfo.department ===\r\n                                          'المدير العام' ||\r\n                                        userInfo.department ===\r\n                                          'نائب المدير العام'\r\n                                          ? true\r\n                                          : false\r\n                                      }\r\n                                    />\r\n                                    <Form.Check\r\n                                      inline\r\n                                      reverse\r\n                                      type='checkbox'\r\n                                      label='الإدارة المالية'\r\n                                      checked={checkedState[4]}\r\n                                      onChange={() => handleOnChange(4)}\r\n                                      disabled={\r\n                                        userInfo.department ===\r\n                                          'المدير العام' ||\r\n                                        userInfo.department ===\r\n                                          'نائب المدير العام'\r\n                                          ? true\r\n                                          : false\r\n                                      }\r\n                                    />\r\n                                  </div>\r\n                                  <div>\r\n                                    <Form.Check\r\n                                      inline\r\n                                      reverse\r\n                                      type='checkbox'\r\n                                      label='الأرشيف العام'\r\n                                      style={{ marginRight: '34px' }}\r\n                                      checked={checkedState[5]}\r\n                                      onChange={() => handleOnChange(5)}\r\n                                      disabled={\r\n                                        userInfo.department ===\r\n                                          'المدير العام' ||\r\n                                        userInfo.department ===\r\n                                          'نائب المدير العام'\r\n                                          ? true\r\n                                          : false\r\n                                      }\r\n                                    />\r\n                                    <Form.Check\r\n                                      inline\r\n                                      reverse\r\n                                      type='checkbox'\r\n                                      label='المدير العام'\r\n                                      checked={checkedState[6]}\r\n                                      onChange={() => handleOnChange(6)}\r\n                                      disabled={\r\n                                        userInfo.department ===\r\n                                          'المدير العام' ||\r\n                                        userInfo.department ===\r\n                                          'نائب المدير العام'\r\n                                          ? true\r\n                                          : false\r\n                                      }\r\n                                    />\r\n                                  </div>\r\n                                  <div>\r\n                                    <Form.Check\r\n                                      inline\r\n                                      reverse\r\n                                      type='checkbox'\r\n                                      label='نائب المدير العام'\r\n                                      checked={checkedState[7]}\r\n                                      onChange={() => handleOnChange(7)}\r\n                                      disabled={\r\n                                        userInfo.department ===\r\n                                          'المدير العام' ||\r\n                                        userInfo.department ===\r\n                                          'نائب المدير العام'\r\n                                          ? true\r\n                                          : false\r\n                                      }\r\n                                    />\r\n                                    <Form.Check\r\n                                      inline\r\n                                      reverse\r\n                                      type='checkbox'\r\n                                      label='سكرتير المدير العام'\r\n                                      checked={checkedState[8]}\r\n                                      onChange={() => handleOnChange(8)}\r\n                                      disabled={\r\n                                        userInfo.department ===\r\n                                          'سكرتير المدير العام' ||\r\n                                        userInfo.department ===\r\n                                          'نائب المدير العام'\r\n                                          ? true\r\n                                          : false\r\n                                      }\r\n                                    />\r\n                                  </div>\r\n                                </Form.Group>\r\n                              </Modal.Body>\r\n                            </div>\r\n                            <div>\r\n                              <Button\r\n                                color='danger'\r\n                                style={{ margin: '10px' }}\r\n                                onClick={handleClose}\r\n                              >\r\n                                غلق\r\n                              </Button>\r\n                              <Button\r\n                                type='submit'\r\n                                color='success'\r\n                                onClick={() => {\r\n                                  handleClose()\r\n                                  postLog(\r\n                                    userInfo.name,\r\n                                    'إرسال مكاتبة',\r\n                                    selectedFile.orgname +\r\n                                      ' ' +\r\n                                      selectedFile.file_no\r\n                                  )\r\n                                  removeDoc(\r\n                                    selectedFile.file_no,\r\n                                    userInfo.dep_id\r\n                                  )\r\n                                }}\r\n                              >\r\n                                إرسال\r\n                              </Button>\r\n                            </div>\r\n                          </Form>\r\n                        </Modal>\r\n                        <Button\r\n                          color='info'\r\n                          onClick={() => {\r\n                            getData(el.file_no)\r\n                            setReadColor(el.file_no, userInfo.dep_id)\r\n                            postLog(\r\n                              userInfo.name,\r\n                              'عرض مكاتبة',\r\n                              el.orgname + ' ' + el.file_no\r\n                            )\r\n                            navigate(`/doc`)\r\n                          }}\r\n                        >\r\n                          عرض\r\n                        </Button>\r\n                        {userInfo.department === 'المدير العام' ||\r\n                        userInfo.department === 'نائب المدير العام' ? (\r\n                          <Button\r\n                            color='warning'\r\n                            onClick={() => {\r\n                              getData(el.file_no)\r\n                              setReadColor(el.file_no, userInfo.dep_id)\r\n                              postLog(\r\n                                userInfo.name,\r\n                                'توقيع مكاتبة',\r\n                                el.orgname + ' ' + el.file_no\r\n                              )\r\n                              window.open(\r\n                                'http://192.168.1.201:5000/api/v1/files/editor'\r\n                              )\r\n                            }}\r\n                          >\r\n                            التوقيع\r\n                          </Button>\r\n                        ) : (\r\n                          <></>\r\n                        )}\r\n                      </td>\r\n                      <td style={{ width: '30%' }}>{el.summary}</td>\r\n                      <td style={{ width: '30%' }}>{el.orgname}</td>\r\n                      <td style={{ width: '10%' }}>{++cnt}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </Table>\r\n            ) : (\r\n              <h4>لا يوجد مكاتبات جديدة</h4>\r\n            )}\r\n          </Container>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DailyScreen\r\n","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\HomeScreen.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\DocViewerScreen.js",["97"],"import React from 'react'\r\nimport pdf from './sample.pdf'\r\n\r\nconst DocViewerScreen = () => {\r\n  return (\r\n    <div>\r\n      <object data={pdf} type='application/pdf' width='100%' height='580px'>\r\n        <a href={pdf}></a>\r\n      </object>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DocViewerScreen\r\n","C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\RegisterScreen.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\AddScreen.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\reducers\\userReducers.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\Message.jsx",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\formContainer.jsx",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\actions\\userActions.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\constants\\userConstants.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\Header.jsx",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\reducers\\docReducers.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\constants\\docConstants.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\actions\\docActions.js",[],["98","99"],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\Loader.jsx",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\pages\\Templog.js",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\components\\Log.jsx",[],"C:\\Users\\Pro1\\Desktop\\Mailing_System\\src\\logger.jsx",[],{"ruleId":"100","replacedBy":"101"},{"ruleId":"102","replacedBy":"103"},{"ruleId":"104","severity":1,"message":"105","line":89,"column":6,"nodeType":"106","endLine":89,"endColumn":8,"suggestions":"107"},{"ruleId":"108","severity":1,"message":"109","line":8,"column":9,"nodeType":"110","endLine":8,"endColumn":23},{"ruleId":"100","replacedBy":"111"},{"ruleId":"102","replacedBy":"112"},"no-native-reassign",["113"],"no-negated-in-lhs",["114"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchDocs'. Either include it or remove the dependency array.","ArrayExpression",["115"],"jsx-a11y/anchor-has-content","Anchors must have content and the content must be accessible by a screen reader.","JSXOpeningElement",["113"],["114"],"no-global-assign","no-unsafe-negation",{"desc":"116","fix":"117"},"Update the dependencies array to be: [fetchDocs]",{"range":"118","text":"119"},[2558,2560],"[fetchDocs]"]